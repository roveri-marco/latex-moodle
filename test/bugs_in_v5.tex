% !TeX encoding = UTF-8
% !TeX spellcheck = en_US
\documentclass{article}
\usepackage[cm]{fullpage}
\usepackage{multirow,hhline,colortbl,threeparttable,graphicx,xcolor}
\usepackage{hyperref}
\begin{document}

This document lists some bugs and limitations uncovered in the \texttt{moodle} 
\LaTeX{} package as of version \texttt{0.5}, currently available on 
\href{https://ctan.org/pkg/moodle}{CTAN}.

Everything is in Table~\ref{tab:2}.

\begin{table*}[tbp]
\centering
\def\OKcell{\cellcolor{green}}
\def\KOcell{\cellcolor{red}}
\def\DNAcell{\cellcolor{black!20}} % "Does not apply"
\def\Warncell{\cellcolor{orange}} % Warning
\def\MyLine{\hhline{~-|>{\arrayrulecolor{green}}->{\arrayrulecolor{black}}--|>{\arrayrulecolor{green}}->{\arrayrulecolor{black}}--|}
}
\begin{threeparttable}[b]
\caption{Content enrichment support after XML import in Moodle \texttt{v3.1}, 
depending on the question type. Color convention: green for 
\colorbox{green}{full support}, orange for \colorbox{orange}{problems limiting 
the support}, red for \colorbox{red}{show-stopping problems}, and gray for 
\colorbox{black!20}{support limitations intrinsic to the question type} defined 
by Moodle.}
\label{tab:2}
\begin{tabular}{rl|ccc|ccc}
\multicolumn{2}{c|}{}& \multicolumn{3}{c|}{\LaTeX{} equation rendering} & 
\multicolumn{3}{c}{Picture inclusion}\\
\multicolumn{2}{c|}{Question type}& Question & Answer & Feedback & Question & 
Answer & Feedback\\\hhline{*{8}{:=}:}

&\href{https://docs.moodle.org/31/en/Multiple_Choice_question_type} 
{Multichoice} \emph{bug\tnote{1}} & \OKcell & \OKcell & \KOcell bug\tnote{2} & 
\Warncell bug\tnote{12} & \Warncell bug\tnote{12} & \KOcell 
bug\tnote{2}, bug\tnote{12}\\\hhline{*{8}{-}}

& \href{https://docs.moodle.org/31/en/Numerical_question_type}{Numerical} & 
\OKcell & \DNAcell Text only\tnote{3} & \KOcell bug\tnote{2} & 
\OKcell bug\tnote{12} & \DNAcell Text only\tnote{3} & \KOcell 
bug\tnote{2}, bug\tnote{12}\\\hhline{*{8}{-}}

& \href{https://docs.moodle.org/31/en/Short-Answer_question_type}{Short Answer} 
& \OKcell & \DNAcell Text only\tnote{3} & \KOcell bug\tnote{2}& \OKcell 
bug\tnote{12} & \DNAcell Text only\tnote{3} & \KOcell 
bug\tnote{2}, bug\tnote{12}\\\hhline{*{8}{-}}

&Matching 
(\href{https://docs.moodle.org/31/en/Matching_question_type}{standard}) & 
\OKcell & \DNAcell Text only\tnote{4} & \DNAcell Irrelevant\tnote{5} & 
\OKcell & \DNAcell Text only\tnote{4} & \DNAcell Irrelevant\tnote{5} 
\\\hhline{*{8}{-}}

&Matching 
(\href{https://docs.moodle.org/31/en/Drag_and_drop_matching_question_type} 
{drag-and-drop})
& \OKcell & \OKcell & \DNAcell Irrelevant\tnote{5} & \OKcell bug\tnote{12}& 
\KOcell bug\tnote{12} & \DNAcell Irrelevant\tnote{5} \\\hhline{*{8}{-}}

&\href{https://docs.moodle.org/31/en/Essay_question_type}{Essay} 
\emph{bug\tnote{6}, note\tnote{11}} & \OKcell & \Warncell note\tnote{7}, 
bug\tnote{8} & \OKcell note\tnote{7} & \Warncell bug\tnote{12} & \Warncell 
note\tnote{7}, bug\tnote{8} & \Warncell note\tnote{7}, 
bug\tnote{12}\\\hhline{*{8}{-}}

\multirow{5}{*}{ 
\href{https://docs.moodle.org/31/en/Embedded_Answers_(Cloze)_question_type}
{Cloze}}

&Numerical & \OKcell & \DNAcell Text only\tnote{3} & \KOcell bug\tnote{2}, 
bug\tnote{9} & \OKcell & \DNAcell Text only\tnote{3} & \KOcell 
bug\tnote{2}\\\MyLine

&Short Answer & \OKcell & \DNAcell Text only\tnote{3} & \KOcell bug\tnote{2}, 
bug\tnote{9}, note\tnote{10} & \OKcell & \DNAcell Text only\tnote{3} & \KOcell 
bug\tnote{2}, note\tnote{10}\\\MyLine

&Multi (dropdown) & \OKcell & \DNAcell Text only\tnote{4} & \KOcell 
bug\tnote{2}, bug\tnote{9}, note\tnote{10} & \OKcell & \DNAcell Text 
only\tnote{4} & \KOcell bug\tnote{2}, note\tnote{10} \\\MyLine

&Multi (horizontal)& \OKcell & \Warncell bug\tnote{9} & \KOcell bug\tnote{2}, 
bug\tnote{9} & \OKcell & \OKcell & \KOcell bug\tnote{2}\\\MyLine

&Multi (vertical)& \OKcell & \Warncell bug\tnote{9} & \KOcell 
bug\tnote{2}, bug\tnote{9} & \OKcell & \OKcell & \KOcell bug\tnote{2}\\\hline
\end{tabular}
\begin{tablenotes}
\item[1] Numbering with option ``ABC" is not recognized by Moodle after XML 
import.
\item[2] Any $\backslash$ symbol here breaks \LaTeX{} compilation. For 
instance, this prevents the use of \verb|\includegraphics|, \verb|\begin| and 
\verb|\sqrt|.
\item[3] Moodle prompts the student for an answer and then compares it to the 
solutions provided. This is text-only.
\item[4] Moodle uses a dropdown list to let one choose among the possible 
answers. This forbids either picture inclusion and \LaTeX{} rendering.
\item[5] Not supported by Moodle (in this context, answer-specific feedback 
represents lots of possible combinations).
\item[6] The keyval ``response template", as documented, is broken. Works if 
replaced with ``template".
\item[7] For this question type and in the context of XML generation, the 
Answer column represents the ``template" while the Feedback column represents 
the ``notes for the grader". Obviously, the grading process is not automatic and
there is no answer-specific feedback.
\item[8] Picture and \LaTeX{} rendering could be done, but only after 
submission and only if the keyval "response format" was set to ``html". 
Unfortunately, the \texttt{<p>...</p>} tags introduced, whatever the response 
format is, prevent rendering.
\item[9] In the generated XML, the symbol $\}$ is not escaped with a backslash 
as required by the Moodle cloze parser. The XML import will fail when the field 
contains \LaTeX{} code like \verb|\sqrt{...}| and \verb|\frac{...}{...}|.
\item[10] Moodle only reveals the feedback when hovering the checkmark or X 
mark with the mouse.
\item[11] When generating an Essay, a note is added to the PDF saying ``Notes: 
(not included in XML)". Instead, the notes are included in the XML and 
available to the grader after import on Moodle.
\item[12] In the XML, the pictures included in the question field and answer or 
feedback fields are mixed.
%\item[13] Moodle's XML import fails with a \textsf{dmlwriteexception} when the 
%field content exceeds few hundreds characters. This prevents the inclusion of 
%most base64 images and maybe some complicated equations. -> fixed in version 
%1.6/7 of the plugin (20190409) :
%https://github.com/jmvedrine/moodle-qtype_ddmatch/commit/b25e914e2c840b08bc0758c10fcc6645123e21bb
\end{tablenotes}
\end{threeparttable}
\end{table*}

\end{document}
